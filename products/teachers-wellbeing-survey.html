<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta name="robots" content="index, follow">
   <meta name="description" content="Schoolmait promotes wellbeing in schools by providing comprehensive student wellbeing assessment solutions.">
   <title>Teacher Wellbeing Survey | Schoolmait</title>
   <link rel="icon" href="/favicon.png" type="image/png">
   <link rel="stylesheet" href="../style.css">
   <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
   <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-GZ4JCKE4LG"></script>
   <script>
       window.dataLayer = window.dataLayer || [];
       function gtag(){dataLayer.push(arguments);}
       gtag('js', new Date());
       gtag('consent', 'default', {
           'ad_storage': 'denied',
           'analytics_storage': 'denied'
       });
       gtag('config', 'G-GZ4JCKE4LG');
   </script>
</head>

<body>
    <div id="header-include"></div>

    <!-- Disclaimer Section -->
    <div id="disclaimer-section" style="max-width:640px;margin:15vh auto 0 auto;padding:28px 20px;background:#f8fafd;border:2px solid #3d5a80;border-radius:14px;box-shadow:0 2px 12px rgba(66,93,129,0.07);text-align:left;">
        <h2 style="color:#3d5a80;margin-bottom:14px;">Teacher Wellbeing Self Assessment</h2>
        <p style="color:#293241;font-size:0.9em;margin-bottom:24px;">
            This free self-assessment consists of 24 multiple-choice questions designed to help you reflect on various aspects of your wellbeing in the school workplace. There are no ‘right’ or ‘wrong’ answers - simply respond based on how you're feeling right now.  Once you complete the questionnaire, you'll receive personalized feedback offering insights into your current wellbeing at work.
            <br><br>
            <u>Please note:</u> This assessment is for informational purposes only. Schoolmait does not take responsibility for any decisions made based on the results. The survey is not intended to replace professional advice, diagnosis, or treatment. Participation is completely voluntary and anonymous.
        </p>
        <button id="disclaimer-proceed-btn" class="button" style="min-width:140px;border-radius:8px;font-size:1.1em;" disabled>Agree & Continue</button>
        <div style="margin-top:18px;">
            <span style="color:#e63946;font-weight:bold;">#Under_Construction:</span>
            <input id="disclaimer-code-input" type="text" maxlength="8" style="margin-left:10px;padding:4px 8px;border-radius:6px;border:1px solid #ccc;font-size:1em;">
        </div>
    </div>
    <!-- Survey Section -->
    <div class="survey-flex-row" id="survey-main-content" style="display:none; margin-top: 110px;">
        <section id="teacher-survey-section" style="margin: 0 auto; max-width: 700px; width: 100%;">
            <form id="teacher-wellbeing-survey" class="survey-card" autocomplete="off" style="font-size: 14px;">
                <div id="survey-progress-bar-container">
                    <div id="survey-progress-bar"></div>
                </div>
                
                <div id="survey-questions">
                    <!-- Q1 -->
                    <div class="survey-q" data-wellbeing-element="Emotional Wellbeing" data-sub-element="Engagement" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">1) I feel happy to go to work</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q1" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q1" value="Agree"> Agree</label>
                            <label><input type="radio" name="q1" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q1" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q1" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q1" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q2 -->
                    <div class="survey-q" data-wellbeing-element="Physical Wellbeing" data-sub-element="Fatigue" data-answer-scores='{"Always":-2,"Often":-1,"Sometimes":0,"Rarely":1,"Never":2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">2) I feel tired during my work days</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q2" value="Always" required> Always</label>
                            <label><input type="radio" name="q2" value="Often"> Often</label>
                            <label><input type="radio" name="q2" value="Sometimes"> Sometimes</label>
                            <label><input type="radio" name="q2" value="Rarely"> Rarely</label>
                            <label><input type="radio" name="q2" value="Never"> Never</label>
                            <label><input type="radio" name="q2" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q3 -->
                    <div class="survey-q" data-wellbeing-element="Meaning & Purpose" data-sub-element="Values Alignment" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">3) I agree with the values of my school</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q3" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q3" value="Agree"> Agree</label>
                            <label><input type="radio" name="q3" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q3" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q3" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q3" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q4 -->
                    <div class="survey-q" data-wellbeing-element="Safety & Belonging" data-sub-element="Physical Safety" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">4) I feel physically safe in the school I work in</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q4" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q4" value="Agree"> Agree</label>
                            <label><input type="radio" name="q4" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q4" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q4" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q4" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q5 -->
                    <div class="survey-q" data-wellbeing-element="Social Wellbeing" data-sub-element="Student Relationships" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">5) I have strong and positive relationships with my students</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q5" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q5" value="Agree"> Agree</label>
                            <label><input type="radio" name="q5" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q5" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q5" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q5" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q6 -->
                    <div class="survey-q" data-wellbeing-element="Professional Wellbeing" data-sub-element="Workload" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">6) I have enough time during the workday to complete my tasks</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q6" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q6" value="Agree"> Agree</label>
                            <label><input type="radio" name="q6" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q6" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q6" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q6" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q7 -->
                    <div class="survey-q" data-wellbeing-element="Meaning & Purpose" data-sub-element="Motivation" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">7) In my workplace I feel motivated to do things to the best of my ability</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q7" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q7" value="Agree"> Agree</label>
                            <label><input type="radio" name="q7" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q7" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q7" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q7" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q8 -->
                    <div class="survey-q" data-wellbeing-element="Social Wellbeing" data-sub-element="Support Networks" data-answer-scores='{"Always":2,"Often":1,"Sometimes":0,"Rarely":-1,"Never":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">8) I feel supported by my colleagues and supervisors</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q8" value="Always" required> Always</label>
                            <label><input type="radio" name="q8" value="Often"> Often</label>
                            <label><input type="radio" name="q8" value="Sometimes"> Sometimes</label>
                            <label><input type="radio" name="q8" value="Rarely"> Rarely</label>
                            <label><input type="radio" name="q8" value="Never"> Never</label>
                            <label><input type="radio" name="q8" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q9 -->
                    <div class="survey-q" data-wellbeing-element="Emotional Wellbeing" data-sub-element="Stress Management" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">9) I am able to manage work-related stress well</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q9" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q9" value="Agree"> Agree</label>
                            <label><input type="radio" name="q9" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q9" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q9" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q9" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q10 -->
                    <div class="survey-q" data-wellbeing-element="Meaning & Purpose" data-sub-element="Sense of Achievement" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">10) I feel a sense of achievement in my day-to-day work</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q10" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q10" value="Agree"> Agree</label>
                            <label><input type="radio" name="q10" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q10" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q10" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q10" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q11 -->
                    <div class="survey-q" data-wellbeing-element="Physical Wellbeing" data-sub-element="Sleep Duration" data-answer-scores='{"5 hours or less":-2,"6 hours":-1,"7 hours":0,"8 hours":1,"9 hours or more":2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">11) During the work week my average night sleep is</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q11" value="5 hours or less" required> 5 hours or less</label>
                            <label><input type="radio" name="q11" value="6 hours"> 6 hours</label>
                            <label><input type="radio" name="q11" value="7 hours"> 7 hours</label>
                            <label><input type="radio" name="q11" value="8 hours"> 8 hours</label>
                            <label><input type="radio" name="q11" value="9 hours or more"> 9 hours or more</label>
                            <label><input type="radio" name="q11" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q12 -->
                    <div class="survey-q" data-wellbeing-element="Social Wellbeing" data-sub-element="Positive relationships" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">12) I laugh a lot with my colleagues and students during my work day</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q12" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q12" value="Agree"> Agree</label>
                            <label><input type="radio" name="q12" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q12" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q12" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q12" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q13 -->
                    <div class="survey-q" data-wellbeing-element="Professional Wellbeing" data-sub-element="Recognition" data-answer-scores='{"Strongly agree":2,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">13) I feel that my work is appreciated and valued</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q13" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q13" value="Agree"> Agree</label>
                            <label><input type="radio" name="q13" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q13" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q13" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q13" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q14 -->
                    <div class="survey-q" data-wellbeing-element="Safety & Belonging" data-sub-element="Personal Safety" data-answer-scores='{"Strongly agree":-2,"Agree":-1,"Neither agree nor disagree":0,"Disagree":1,"Strongly disagree":2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">14) In the last few months I felt that I have been abused by someone from work</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q14" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q14" value="Agree"> Agree</label>
                            <label><input type="radio" name="q14" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q14" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q14" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q14" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q15 -->
                    <div class="survey-q" data-wellbeing-element="Financial Wellbeing" data-sub-element="Compensation" data-answer-scores='{"Strongly agree":1.5,"Agree":1,"Neither agree nor disagree":0,"Disagree":-1,"Strongly disagree":-1.5,"I prefer not to answer":null}'>
                        <label class="survey-q-title">15) I feel that my salary is proportionate to the work I do</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q15" value="Strongly agree" required> Strongly agree</label>
                            <label><input type="radio" name="q15" value="Agree"> Agree</label>
                            <label><input type="radio" name="q15" value="Neither agree nor disagree"> Neither agree nor disagree</label>
                            <label><input type="radio" name="q15" value="Disagree"> Disagree</label>
                            <label><input type="radio" name="q15" value="Strongly disagree"> Strongly disagree</label>
                            <label><input type="radio" name="q15" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                    <!-- Q16 -->
                    <div class="survey-q" data-wellbeing-element="Physical Wellbeing" data-sub-element="Physical Exercise" data-answer-scores='{"No activity at all":-2,"1 hour per week":-1,"2 hours per week":0,"3 hours per week":1,"4 hours or more":2,"I prefer not to answer":null}'>
                        <label class="survey-q-title">16) During the week, I usually have activities that involve sport</label>
                        <div class="survey-options">
                            <label><input type="radio" name="q16" value="No activity at all" required> No activity at all</label>
                            <label><input type="radio" name="q16" value="1 hour per week"> 1 hour per week</label>
                            <label><input type="radio" name="q16" value="2 hours per week"> 2 hours per week</label>
                            <label><input type="radio" name="q16" value="3 hours per week"> 3 hours per week</label>
                            <label><input type="radio" name="q16" value="4 hours or more"> 4 hours or more</label>
                            <label><input type="radio" name="q16" value="I prefer not to answer"> I prefer not to answer</label>
                        </div>
                    </div>
                </div>
                <div style="display: flex; justify-content: center; align-items: center; gap: 18px; margin-top: 24px;">
<button type="button" id="survey-back-btn" class="button" style="display:none; min-width:140px; border-radius: 8px;">Back</button>
<button type="submit" id="survey-submit-btn" class="button" style="display:none; min-width:140px; border-radius: 8px; ">View Results</button>
</div>
                <div id="survey-thankyou" style="display:none; color:#3d5a80; font-size:1.2em; text-align:center; margin-top:30px;">
                    Thank you for completing the survey!<br>Your responses have been recorded anonymously.
                </div>
            </form>
        </section>
    </div>
<!-- Results Section -->
    <div class="survey-flex-row" id="survey-results" style="display:none;">
        <div id="survey-results-header" style="display:none; margin-top:0; color:#293241; font-size:1.25em; text-align:left; margin-bottom:18px;">
            <h3 style="color:#3d5a80; margin-bottom:10px; font-size:1.3em;">Your Self-Assessment Wellbeing Scores</h3>
        </div>
        <div class="survey-col" id="survey-chart-col" style="display:none;">
            <div id="survey-results-inner">
                <div class="survey-results-row">
                    <canvas id="wellbeing-chart"></canvas>
                    <div id="subelement-summary"></div>
                </div>
            </div>
        </div>
    </div>
<!-- Styling -->
    <style>
        /* Default styles for 1025px and above */
        .survey-card {
            background: #f0f0f0;
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(66,93,129,0.07);
            padding: 24px 24px;
            margin: 0 auto 24px auto;
            border: 2px solid #3d5a80;
        }
        .survey-q {
            margin-bottom: 28px;
            padding-bottom: 12px;
            border-bottom: 1px solid #e0e0e0;
        }
        .survey-q.survey-q-hidden {
            display: none;
        }
        .survey-q:last-child {
            border-bottom: none;
        }
        .survey-q-title {
            display: block;
            font-weight: 600;
            color: #425d81;
            margin-bottom: 10px;
            font-size: 1em;
        }
        .survey-required {
            color: #e63946;
            font-weight: bold;
        }
        .survey-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 2px;
        }
        .survey-options label {
            background: #fff;
            border: 1.5px solid #fff;
            border-radius: 8px;
            padding: 8px 2px 8px 10px;
            font-size: 1em;
            color: #333;
            cursor: pointer;
            transition: border-color 0.18s, box-shadow 0.18s;
            margin-bottom: 0;
            min-width: 120px;
            box-shadow: 0 1px 8px rgba(66,93,129,0.04);
            display: inline-block;
            align-items: center;
        }
        .survey-options input[type="radio"] {
            accent-color: #e63946;
            margin-right: 10px;
            width: 18px;
            height: 18px;
        }
        .survey-options label:hover, .survey-options input[type="radio"]:checked + label {
            background-color: #e63946;
            color: #fff;
            border-radius: 10px;
            border-color: #007bff;
            box-shadow: 0 2px 8px rgba(0,123,255,0.2);
        }
        #survey-progress-bar-container {
            width: 100%;
            height: 7px;
            background: #e0e0e0;
            border-radius: 4px;
            margin-bottom: 24px;
            overflow: hidden;
        }
        #survey-progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #3d5a80 0%, #e63946 100%);
            border-radius: 4px;
            transition: width 0.4s cubic-bezier(.4,0,.2,1);
        }
        .survey-flex-row {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            gap: 40px;
            align-items: flex-start;
            width: 100%;
        }
        .survey-col {
            flex: 1 1 35%;
            max-width: 35%;
            min-width: 320px;
            box-sizing: border-box;
        }
        #survey-chart-col {
            max-width: 450px;
            min-width: 350px;
            display: flex;
            flex-direction: column;
            align-items: left;
            justify-content: flex-start;
        }
        #survey-results {
            padding: 0px 18px;
            margin-top: 24px;
            display: block;
            color: #293241;
            font-size: 1.08em;
            text-align: left;
        }
        .survey-results-row {
            display: flex;
            flex-direction: row;
            gap: 48px;
            align-items: flex-start;
        }
        #wellbeing-chart {
            max-height: 350px;
            min-height: 250px;
            flex: 1 1 100%;
            align-self: flex-start;
            justify-self: flex-start;
        }
        #subelement-summary {
            margin-top: 24px !important;
            flex: 1 1 100%;
            min-width: 320px;
        }
        /* Up to 1024px */
        @media (max-width: 1024px) {
            .survey-card { padding: 16px 4px; }
            .survey-q-title { font-size: 1em; }
            .survey-options label { font-size: 0.98em; }
            .survey-flex-row {
                flex-direction: column;
                gap: 1rem;
            }
            .survey-col, #survey-chart-col {
                max-width: 100%;
                min-width: 0;
            }
            .survey-results-row {
                flex-direction: column !important;
                gap: 18px !important;
            }
            #wellbeing-chart { max-height: 300px; }
            #subelement-summary { margin-top: 24px !important; }
        }
    </style>
<!-- Script Section -->
    <script>

        function getScore(qIdx, value, answerScores) {
            if (value == null) return null;
            const baseScore = answerScores[value];
            if (baseScore == null) return null;
            return baseScore;
        }

        const wellbeingElements = [
            "Meaning & Purpose",
            "Emotional Wellbeing",
            "Social Wellbeing",
            "Physical Wellbeing",
            "Professional Wellbeing",
            "Financial Wellbeing",
            "Safety & Belonging",
        ];

        // Add radarLabels with line breaks for long labels
        const radarLabels = [
            ["Meaning &", "Purpose"],
            ["Emotional", "Wellbeing"],
            ["Social", "Wellbeing"],
            ["Physical", "Wellbeing"],
            ["Professional", "Wellbeing"],
            ["Financial", "Wellbeing"],
            ["Safety &", "Belonging"]
        ];

        let wellbeingChart;

        function initializeChart() {
            const ctx = document.getElementById('wellbeing-chart').getContext('2d');
            wellbeingChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: radarLabels,
                    datasets: [{
                        label: 'Wellbeing Scores',
                        data: new Array(wellbeingElements.length).fill(0.1),
                        backgroundColor: 'rgba(44, 204, 113, 0.15)',
                        borderColor: '#3d5a80',
                        borderWidth: 2,
                        pointBackgroundColor: function(context) {
                            const value = context.dataset.data[context.dataIndex];
                            if (value <= 0) return '#e63946';
                            if (value <= 0.5) return '#f4c430';
                            return '#2ecc71';
                        },
                        pointRadius: 5,
                        pointHoverRadius: 7,
                        pointBorderWidth: 2,
                        pointBorderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: '#293241',
                            titleFont: {
                                family: "'Space Grotesk', sans-serif",
                                size: 12
                            },
                            bodyFont: {
                                family: "'Space Grotesk', sans-serif",
                                size: 12
                            },
                            callbacks: {
                                label: function(context) {
                                    // Remove score from tooltip
                                    return context.dataset.label;
                                }
                            }
                        }
                    },
                    scales: {
                        r: {
                            min: -2,
                            max: 2,
                            ticks: {
                                display: false,
                                stepSize: 1 // Show grid lines at -2, -1, 0, 1, 2
                            },
                            angleLines: {
                                color: 'rgba(41,50,65,0.08)'
                            },
                            grid: {
                                color: 'rgba(41,50,65,0.13)'
                            },
                            pointLabels: {
                                font: {
                                    size: 12,
                                    family: "'Space Grotesk', sans-serif"
                                },
                                color: '#425d81',
                                padding: 4,
                                // Chart.js will automatically split on \n
                            }
                        }
                    },
                    layout: {
                        padding: {
                            top: 10,
                            bottom: 10,
                            left: 10,
                            right: 10
                        }
                    }
                }
            });
        }

        (function() {
            const form = document.getElementById('teacher-wellbeing-survey');
            const questions = Array.from(form.querySelectorAll('.survey-q'));
            const submitBtn = document.getElementById('survey-submit-btn');
            const backBtn = document.getElementById('survey-back-btn');
            const progressBar = document.getElementById('survey-progress-bar');
            const total = questions.length;
            const resultsDiv = document.getElementById('survey-results');
            const surveySection = document.getElementById('teacher-survey-section');
            const chartCol = document.getElementById('survey-chart-col');
            const resultsHeader = document.getElementById('survey-results-header');

            let currentIdx = 0;

            questions.forEach((q, i) => {
                if (i !== 0) q.classList.add('survey-q-hidden');
            });
            submitBtn.style.display = 'none';
            backBtn.style.display = 'none';

            function setProgress(idx) {
                const percent = Math.round((idx+1) / total * 100);
                progressBar.style.width = percent + '%';
            }
            setProgress(0);

            initializeChart();

            function getCurrentAnswers() {
                const answers = [];
                for (let i = 1; i <= total; i++) {
                    const radios = form.querySelectorAll(`input[name="q${i}"]`);
                    let value = null;
                    radios.forEach(r => { if (r.checked) value = r.value; });
                    answers.push(value);
                }
                return answers;
            }

            function updateScoresDisplay() {
                const answers = getCurrentAnswers();
                const elementScores = new Map();
                const elementCounts = {};
                wellbeingElements.forEach(el => {
                    elementScores.set(el, 0);
                    elementCounts[el] = 0;
                });

                // Sub-element calculation
                const subElementScores = {};
                const subElementCounts = {};

                questions.forEach((q, i) => {
                    const el = q.dataset.wellbeingElement;
                    const subEl = q.dataset.subElement;
                    const answerScores = JSON.parse(q.dataset.answerScores);
                    const score = getScore(i, answers[i], answerScores);
                    if (el && score !== null && score !== undefined) {
                        elementScores.set(el, elementScores.get(el) + score);
                        elementCounts[el]++;
                    }
                    if (subEl) {
                        if (!(subEl in subElementScores)) {
                            subElementScores[subEl] = 0;
                            subElementCounts[subEl] = 0;
                        }
                        if (score !== null && score !== undefined) {
                            subElementScores[subEl] += score;
                            subElementCounts[subEl]++;
                        }
                    }
                });

                const elementAverages = [];
                wellbeingElements.forEach(el => {
                    if (elementCounts[el] > 0) {
                        const avg = elementScores.get(el) / elementCounts[el] + 0.1; // Adding 0.1 to avoid zero scores
                        elementAverages.push(avg);
                    } else {
                        elementAverages.push(0.1);
                    }
                });

                // Remove overallScore from chart data
                // const overallScore = elementAverages.reduce((sum, avg) => sum + avg, 0) / wellbeingElements.length;
                // elementAverages.push(overallScore);

                wellbeingChart.data.datasets[0].data = elementAverages;
                wellbeingChart.update();
                resultsDiv.style.display = "block";

                // Sub-element averages and summary
                const subElementAverages = [];
                for (const subEl in subElementScores) {
                    if (subElementCounts[subEl] > 0) {
                        subElementAverages.push({
                            name: subEl,
                            avg: subElementScores[subEl] / subElementCounts[subEl]
                        });
                    }
                }
                subElementAverages.sort((a, b) => b.avg - a.avg);

                // Only include strengths with avg > 0.5, and bottom with avg < 0
                const topStrengths = subElementAverages.filter(item => item.avg > 0.5).slice(0, 3);
                const bottomAreas = subElementAverages.filter(item => item.avg < 0).slice(-3).reverse();

                // Render summary
                const summaryDiv = document.getElementById('subelement-summary');
                let html = '';
                if (subElementAverages.length > 0) {
                    html += '<div style="display:flex;flex-direction:column;gap:18px;flex-wrap:wrap;">';
                    html += '<div style="flex:1;"><b style="color:#2ecc71;">Areas of Strength</b><ol style="margin:8px 0 0 18px;padding:0;font-size:0.98em;">';
                    if (topStrengths.length === 0) {
                        html += '<li style="color:#888;">None</li>';
                    } else {
                        topStrengths.forEach(item => {
                            html += `<li>${item.name}</li>`;
                        });
                    }
                    html += '</ol></div>';
                    html += '<div style="flex:1;"><b style="color:#e63946;">Areas to Improve</b><ol style="margin:8px 0 0 18px;padding:0;font-size:0.98em;">';
                    if (bottomAreas.length === 0) {
                        html += '<li style="color:#888;">None</li>';
                    } else {
                        bottomAreas.forEach(item => {
                            html += `<li>${item.name}</li>`;
                        });
                    }
                    html += '</ol></div>';
                    html += '</div>';
                }
                summaryDiv.innerHTML = html;
            }

            function showQuestion(idx) {
                questions.forEach((q, i) => {
                    if (i === idx) q.classList.remove('survey-q-hidden');
                    else q.classList.add('survey-q-hidden');
                });
                setProgress(idx);
                // Show/hide back button
                backBtn.style.display = idx > 0 ? 'inline-block' : 'none';
                // Show submit button only on last question and only if answered
                if (idx === questions.length - 1) {
                    const radios = questions[idx].querySelectorAll('input[type="radio"]');
                    let answered = false;
                    radios.forEach(r => { if (r.checked) answered = true; });
                    submitBtn.style.display = answered ? 'inline-block' : 'none';
                } else {
                    submitBtn.style.display = 'none';
                }
            }

            questions.forEach((q, i) => {
                const radios = q.querySelectorAll('input[type="radio"]');
                radios.forEach(radio => {
                    radio.addEventListener('click', function() {
                        updateScoresDisplay();
                        if (i < questions.length - 1) {
                            currentIdx = i + 1;
                            showQuestion(currentIdx);
                        } else {
                            // Only show submit if answered
                            let answered = false;
                            radios.forEach(r => { if (r.checked) answered = true; });
                            submitBtn.style.display = answered ? 'inline-block' : 'none';
                            setProgress(i);
                        }
                    });
                });
            });

            // Also handle if user changes answer on last question (e.g. unselects/reselects)
            if (questions.length > 0) {
                const lastRadios = questions[questions.length - 1].querySelectorAll('input[type="radio"]');
                lastRadios.forEach(radio => {
                    radio.addEventListener('click', function() {
                        let answered = false;
                        lastRadios.forEach(r => { if (r.checked) answered = true; });
                        submitBtn.style.display = answered ? 'inline-block' : 'none';
                    });
                });
            }

            backBtn.addEventListener('click', function() {
                if (currentIdx > 0) {
                    currentIdx--;
                    showQuestion(currentIdx);
                }
            });

            // Initialize currentIdx and show/hide buttons
            currentIdx = 0;
            showQuestion(currentIdx);

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                submitBtn.style.display = 'none';
                backBtn.style.display = 'none';
                // Hide the survey section
                surveySection.style.display = 'none';
                // Show the chart/results column and results section
                resultsDiv.style.display = 'flex';
                chartCol.style.display = 'flex';
                // Show the results header
                if (resultsHeader) resultsHeader.style.display = 'block';
                // Hide progress bar and thank you message
                progressBar.style.width = '100%';
                document.getElementById('survey-questions').style.display = 'none';
                document.getElementById('survey-thankyou').style.display = 'none';
                // Show results (now update and show)
                updateScoresDisplay();
            });
        })();
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var proceedBtn = document.getElementById('disclaimer-proceed-btn');
            var codeInput = document.getElementById('disclaimer-code-input');
            if (codeInput) {
                codeInput.addEventListener('input', function() {
                    proceedBtn.disabled = codeInput.value !== '3006';
                });
            }
            proceedBtn.addEventListener('click', function() {
                if (proceedBtn.disabled) return;
                document.getElementById('disclaimer-section').style.display = 'none';
                var surveyMain = document.getElementById('survey-main-content');
                // Remove display:none and set to flex (for desktop) or block (for mobile)
                surveyMain.style.display = window.innerWidth <= 1024 ? 'block' : 'flex';
            });
        });
    </script>

    <div id="footer-include"></div>
    <script src="/js/include.js"></script>
</body>
</html>